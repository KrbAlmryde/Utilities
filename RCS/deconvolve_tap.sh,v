head	1.1;
access;
symbols;
locks
	kylealmryde:1.1; strict;
comment	@# @;


1.1
date	2011.09.01.22.03.53;	author kylealmryde;	state Exp;
branches;
next	;


desc
@I have set a while loop at the beggining of the code block. I has a suspicion that it is causeing things to act "funny", I think I will soon change this to a for loop to see how it works.
@


1.1
log
@Initial revision
@
text
@####################################################################################################
#
#I also need to see what the BASH and tcsh variants of read is, as it is clearly not working out yet

. $UTL/${1}_profile

cd ${func_dir}
####################################################################################################
# Here goes nothing!

echo "Deconvolution!!"
echo ""
####################################################################################################
#

while read wav; do

	if [ "${run}" = "SP1" ]; then
	3dDeconvolve -input ${runnm}_scale+tlrc -polort A \
	    -censor motion_${runnm}_censor.txt \
		-mask ${runnm}_automask+tlrc -num_stimts 9 -global_times \
		-stim_times 1 ${UTL}/stim_${run}_animal.txt 'WAV($wav)' -stim_label 1 ${wavnm}_animal+tlrc \
		-stim_times 2 ${UTL}/stim_${run}_food.txt 'WAV($wav)' -stim_label 2 ${wavnm}_food+tlrc \
		-stim_times 3 ${UTL}/stim_${run}_null.txt 'WAV($wav)' -stim_label 3 ${wavnm}_null+tlrc \
		-stim_file 4 ${runnm}_dfile.txt'[0]' -stim_base 4 -stim_label 4 roll \
		-stim_file 5 ${runnm}_dfile.txt'[1]' -stim_base 5 -stim_label 5 pitch \
		-stim_file 6 ${runnm}_dfile.txt'[2]' -stim_base 6 -stim_label 6 yaw \
		-stim_file 7 ${runnm}_dfile.txt'[3]' -stim_base 7 -stim_label 7 dS \
		-stim_file 8 ${runnm}_dfile.txt'[4]' -stim_base 8 -stim_label 8 dL \
		-stim_file 9 ${runnm}_dfile.txt'[5]' -stim_base 9 -stim_label 9 dP \
		-iresp 1 ${wavnm}_animal_irf+tlrc \
		-iresp 2 ${wavnm}_food_irf+tlrc \
		-iresp 3 ${wavnm}_null_irf+tlrc \
		-bucket ${wavnm}_bucket+tlrc

#	for stim in animal food null; do
#		echo "Enter value for sub-brick you wish to extract" ; read brik
#		3dbucket -prefix ${wavnm}_${stim}_peak_irf+tlrc -fbuc ${wavnm}_bucket+tlrc'[2]'
#	done
####################################################################################################
#
#

	elif [ "${run}" = "TP1" ]; then

	3dDeconvolve -input ${runnm}_scale+tlrc -polort A \
	    -censor motion_${runnm}_censor.txt \
		-mask ${runnm}_automask+tlrc -num_stimts 9 -global_times \
		-stim_times 1 ${UTL}/stim_${run}_old.txt 'WAV($wav)' -stim_label 1 ${wavnm}_old+tlrc \
		-stim_times 2 ${UTL}/stim_${run}_new.txt 'WAV($wav)' -stim_label 2 ${wavnm}_new+tlrc \
		-stim_times 3 ${UTL}/stim_${run}_null.txt 'WAV($wav)' -stim_label 3 ${wavnm}_null+tlrc \
		-stim_file 4 ${runnm}_dfile.txt'[0]' -stim_base 4 -stim_label 4 roll \
		-stim_file 5 ${runnm}_dfile.txt'[1]' -stim_base 5 -stim_label 5 pitch \
		-stim_file 6 ${runnm}_dfile.txt'[2]' -stim_base 6 -stim_label 6 yaw \
		-stim_file 7 ${runnm}_dfile.txt'[3]' -stim_base 7 -stim_label 7 dS \
		-stim_file 8 ${runnm}_dfile.txt'[4]' -stim_base 8 -stim_label 8 dL \
		-stim_file 9 ${runnm}_dfile.txt'[5]' -stim_base 9 -stim_label 9 dP \
		-iresp 1 ${wavnm}_old_irf+tlrc \
		-iresp 2 ${wavnm}_new_irf+tlrc \
		-iresp 3 ${wavnm}_null_irf+tlrc \
		-bucket ${wavnm}_bucket+tlrc

#	for stim in old new null; do
#		echo "Enter value for sub-brick you wish to extract" ; read brik
#		3dbucket -prefix ${wavnm}_${stim}_peak_irf+tlrc -fbuc ${wavnm}_${stim}_irf+tlrc'[2]'
#	done
####################################################################################################
#
#

	else

	3dDeconvolve -input ${runnm}_scale+tlrc -polort A \
	    -censor motion_${runnm}_censor.txt \
		-mask ${runnm}_automask+tlrc -num_stimts 9 -global_times \
		-stim_times 1 ${UTL}/stim_${run}_male.txt 'WAV($wav)' -stim_label 1 ${wavnm}_male+tlrc \
		-stim_times 2 ${UTL}/stim_${run}_female.txt 'WAV($wav)' -stim_label 2 ${wavnm}_female+tlrc \
		-stim_times 3 ${UTL}/stim_${run}_null.txt 'WAV($wav)' -stim_label 3 ${wavnm}_null+tlrc \
		-stim_file 4 ${runnm}_dfile.txt'[0]' -stim_base 4 -stim_label 4 roll \
		-stim_file 5 ${runnm}_dfile.txt'[1]' -stim_base 5 -stim_label 5 pitch \
		-stim_file 6 ${runnm}_dfile.txt'[2]' -stim_base 6 -stim_label 6 yaw \
		-stim_file 7 ${runnm}_dfile.txt'[3]' -stim_base 7 -stim_label 7 dS \
		-stim_file 8 ${runnm}_dfile.txt'[4]' -stim_base 8 -stim_label 8 dL \
		-stim_file 9 ${runnm}_dfile.txt'[5]' -stim_base 9 -stim_label 9 dP \
		-iresp 1 ${wavnm}_male_irf+tlrc \
		-iresp 2 ${wavnm}_female_irf+tlrc \
		-iresp 3 ${wavnm}_null_irf+tlrc \
		-bucket ${wavnm}_bucket+tlrc

#	for stim in male female null; do
#		echo "Enter value for sub-brick you wish to extract" ; read brick
#		3dbucket -prefix ${wavnm}_${stim}_peak_irf+orig -fbuc ${wavnm}_${stim}_irf+orig'[2]'
#	done
	fi

done <${WAV}
@
